<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile - Work Eye</title>
  
  
  <style type="text/css">@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Orbitron;font-style:normal;font-weight:700;src:url(/cf-fonts/v/orbitron/5.0.18/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}</style>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="stars" class="stars"></div>
  <div class="nebula"></div>
  <div class="content">
    <div id="profile-section" class="profile-content">
      <div class="profile-header">
        <div class="profile-left">
          <img id="avatar" src="https://via.placeholder.com/80" alt="Avatar">
          <div class="profile-info">
            <p id="nick-value">@UserName</p>
            <p id="user-id-value">123456789</p>
          </div>
        </div>
        <button id="balance-btn" class="balance-btn" onclick="openModal('donate-modal')">üí∞ –ë–∞–ª–∞–Ω—Å: <span id="balance-value">0</span></button>
        <div class="profile-stats">
          <div data-lang="rating-label">–†–µ–π—Ç–∏–Ω–≥: <span id="rating">0</span></div>
          <div data-lang="completed-label">–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã: <span id="completed-works">0</span></div>
        </div>
      </div>
      <div class="profile-description">
        <p id="profile-desc">–û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...</p>
      </div>
      <h2 data-lang="my-services">–ú–æ–∏ —É—Å–ª—É–≥–∏</h2>
      <div class="price-cards" id="price-cards">
        </div>
      <h2 data-lang="my-works">–ú–æ–∏ —Ä–∞–±–æ—Ç—ã</h2>
      <div class="work-cards" id="work-cards">
        </div>
    </div>

    <div id="chat-modal" class="modal">
      <div class="modal-content">
        <div class="chat-sidebar" id="chat-list-sidebar">
          <h3 data-lang="chats-title">–ß–∞—Ç—ã</h3>
        </div>
        <div class="chat-main">
          <span class="close" onclick="closeModal('chat-modal')">&times;</span>
          <div class="chat-header" id="chat-main-header" data-lang="select-chat">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è</div>
          <div class="chat-messages" id="chat-main-messages"></div>
          <div class="chat-input" id="chat-main-input" style="display: none;">
             <input type="text" id="chat-input-field" data-lang-placeholder="message-placeholder" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
             <button id="chat-send-btn" data-lang="send">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
          </div>
        </div>
      </div>
    </div>

    <div id="settings-modal" class="modal">
      <div class="modal-content">
          <span class="close" onclick="closeModal('settings-modal')">&times;</span>
          <h2 data-lang="settings-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
          <div class="form-group">
              <span data-lang="language-label">–Ø–∑—ã–∫:</span>
              <button onclick="setLang('ru')">–†—É—Å—Å–∫–∏–π</button>
              <button onclick="setLang('en')">English</button>
          </div>
          <div class="form-group">
              <fieldset class="theme-selector">
                <legend class="legend" data-lang="theme-label">–¢–µ–º–∞:</legend>
                <div class="radio-group">
                  <label class="theme-option">
                    <input
                      type="radio"
                      name="theme"
                      value="light"
                      class="radio-input"
                    />
                    <div class="theme-box light-theme"></div>
                    <span class="option-label">
                      <svg class="icon check-icon" viewBox="0 0 24 24">
                        <path
                          d="M5 13l4 4L19 7"
                          stroke="currentColor"
                          stroke-width="2"
                          fill="none"
                        ></path>
                      </svg>
                      <svg class="icon minus-icon" viewBox="0 0 24 24">
                        <path
                          d="M5 12h14"
                          stroke="currentColor"
                          stroke-width="2"
                          fill="none"
                        ></path>
                      </svg>
                      <span class="label-text">Light</span>
                    </span>
                  </label>

                  <label class="theme-option">
                    <input type="radio" name="theme" value="dark" class="radio-input" />
                    <div class="theme-box dark-theme"></div>
                    <span class="option-label">
                      <svg class="icon check-icon" viewBox="0 0 24 24">
                        <path
                          d="M5 13l4 4L19 7"
                          stroke="currentColor"
                          stroke-width="2"
                          fill="none"
                        ></path>
                      </svg>
                      <svg class="icon minus-icon" viewBox="0 0 24 24">
                        <path
                          d="M5 12h14"
                          stroke="currentColor"
                          stroke-width="2"
                          fill="none"
                        ></path>
                      </svg>
                      <span class="label-text">Dark</span>
                    </span>
                  </label>

                  <label class="theme-option">
                    <input type="radio" name="theme" value="system" class="radio-input" />
                    <div class="theme-box system-theme"></div>
                    <span class="option-label">
                      <svg class="icon check-icon" viewBox="0 0 24 24">
                        <path
                          d="M5 13l4 4L19 7"
                          stroke="currentColor"
                          stroke-width="2"
                          fill="none"
                        ></path>
                      </svg>
                      <svg class="icon minus-icon" viewBox="0 0 24 24">
                        <path
                          d="M5 12h14"
                          stroke="currentColor"
                          stroke-width="2"
                          fill="none"
                        ></path>
                      </svg>
                      <span class="label-text">System</span>
                    </span>
                  </label>
                </div>
              </fieldset>
          </div>
          <div class="form-group">
              <span data-lang="edit-profile-label">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</span>
              <button onclick="showEditProfile()" data-lang="edit-profile-button">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
          </div>
      </div>
    </div>
    
    <div id="about-modal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal('about-modal')">&times;</span>
        <h2 data-lang="about-title">–û –Ω–∞—Å</h2>
        <p data-lang="about-text">Work Eye - —ç—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ä–∞–±–æ—Ç—ã –∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π.</p>
        <a href="https://t.me/your_channel_link" target="_blank" data-lang="telegram-channel">–ù–∞—à Telegram –ö–∞–Ω–∞–ª</a>
      </div>
    </div>

    <div id="edit-profile-modal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeEditProfileModal()">&times;</span>
        <div id="edit-profile-content">
          <h2 data-lang="edit-profile-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</h2>
          <div class="form-group">
              <label data-lang="nick-label">–ù–∏–∫:</label>
              <input id="edit-nick" type="text" disabled>
              <small id="nick-help" style="display: none; color: #ff6b6b;">–¢–æ–ª—å–∫–æ –¥–ª—è VIP</small>
          </div>
          <div class="form-group">
              <label data-lang="description-label">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
              <textarea id="edit-desc" rows="4"></textarea>
          </div>
          <hr>
          <h3 data-lang="services">–£—Å–ª—É–≥–∏</h3>
          <div id="edit-price-cards" class="price-cards"></div>
          <div class="form-group">
              <button onclick="managePriceList()" data-lang="manage-pricelist">–î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É</button>
          </div>
          <hr>
          <h3 data-lang="works">–†–∞–±–æ—Ç—ã</h3>
          <div id="edit-work-cards" class="work-cards"></div>
          <div class="form-group">
              <button onclick="manageWorks()" data-lang="manage-works">–î–æ–±–∞–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É</button>
          </div>
          <hr>
          <div class="form-group">
              <button onclick="saveProfile()" data-lang="save-button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
              <button onclick="closeEditProfileModal()" data-lang="cancel-button">–û—Ç–º–µ–Ω–∞</button>
          </div>
        </div>
      </div>
    </div>
    
    <div class="menu">
      <a href="index.html" class="link">
        <span class="link-icon"><svg fill="none" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"></rect><path d="M213.3815,109.61945,133.376,36.88436a8,8,0,0,0-10.76339.00036l-79.9945,72.73477A8,8,0,0,0,40,115.53855V208a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V115.53887A8,8,0,0,0,213.3815,109.61945Z" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path></svg></span>
        <span class="link-title" data-lang="home">Home</span>
      </a>
      <a href="#" class="link" onclick="openModal('chat-modal')">
        <span class="link-icon"><svg fill="none" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"></rect><path d="M45.42853,176.99811A95.95978,95.95978,0,1,1,79.00228,210.5717l.00023-.001L45.84594,220.044a8,8,0,0,1-9.89-9.89l9.47331-33.15657Z" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path><line x1="96" y1="112" x2="160" y2="112" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line><line x1="96" y1="144" x2="160" y2="144" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line></svg></span>
        <span class="link-title" data-lang="chat">Chat</span>
      </a>
      <a href="#" class="link" onclick="openModal('about-modal')">
        <span class="link-icon"><svg fill="none" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"></rect><circle cx="128" cy="128" r="96" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></circle><circle cx="128" cy="120" r="12"></circle><line x1="128" y1="152" x2="128" y2="80" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line></svg></span>
        <span class="link-title" data-lang="about">–û –Ω–∞—Å</span>
      </a>
      <a href="#" class="link" onclick="openModal('referral-modal')">
        <span class="link-icon"><svg fill="none" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"></rect><path d="M32,128A96,96,0,1,0,128,32a96.011,96.011,0,0,0-96,96Z" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path><path d="M128,88V128l32,32" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path></svg></span>
        <span class="link-title" data-lang="referral">–†–µ—Ñ–µ—Ä–∞–ª–∫–∞</span>
      </a>
      <a href="#" class="link" onclick="openModal('settings-modal')">
        <span class="link-icon"><svg fill="none" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"></rect><circle cx="128" cy="128" r="40" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></circle><path d="M195.88727,165.1333a104.0045,104.0045,0,0,1-135.77454,0" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path><path d="M165.1333,60.11273a104.0045,104.0045,0,0,1,0,135.77454" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path><path d="M91.8667,195.88727a104.0045,104.0045,0,0,1-31.754-135.77454" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></path></svg></span>
        <span class="link-title" data-lang="settings">Settings</span>
      </a>
    </div>

    <div class="modal" id="pricelist-modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal('pricelist-modal')">&times;</span>
        <h2 data-lang="pricelist-title">–î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É</h2>
        <div class="form-group">
          <label for="card-service" data-lang="service-name">–£—Å–ª—É–≥–∞:</label>
          <select id="card-service"></select>
        </div>
        <div class="form-group">
          <button onclick="addCard()" data-lang="add-card">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
      </div>
    </div>
    <div class="modal" id="work-modal">
       <div class="modal-content">
        <span class="close" onclick="closeModal('work-modal')">&times;</span>
        <h2 data-lang="work-title">–î–æ–±–∞–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É</h2>
        <div class="form-group">
          <label for="work-title" data-lang="vacancy-name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã:</label>
          <select id="work-title"></select>
        </div>
        <div class="form-group">
          <button onclick="addWork()" data-lang="add-work-card">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
      </div>
    </div>

    <div id="donate-modal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal('donate-modal')">&times;</span>
        <h2>–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞</h2>
        <div class="form-group">
          <p>–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: <span id="modal-balance">0</span> ‚ÇΩ</p>
        </div>
        <div class="form-group">
          <h3>VIP –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏</h3>
          <ul>
            <li>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∏–∫–∞</li>
            <li>–¶–≤–µ—Ç–Ω–æ–π –Ω–∏–∫</li>
            <li>–°–≤–µ—Ç—è—â–∏–µ—Å—è –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ –ø–æ–∏—Å–∫–µ –∏ –ø—Ä–æ—Ñ–∏–ª–µ</li>
          </ul>
          <p>VIP –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –±–∞–ª–∞–Ω—Å–µ > 500 ‚ÇΩ</p>
        </div>
        <div class="form-group">
          <label>–°—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è:</label>
          <select id="donate-amount">
            <option value="100">100 ‚ÇΩ</option>
            <option value="300">300 ‚ÇΩ</option>
            <option value="500">500 ‚ÇΩ (VIP)</option>
            <option value="1000">1000 ‚ÇΩ (VIP + –±–æ–Ω—É—Å)</option>
          </select>
        </div>
        <div class="form-group">
          <button onclick="processDonation()">–ü–æ–ø–æ–ª–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –ÆKassa</button>
        </div>
        <p id="donate-status"></p>
      </div>
    </div>

    <div id="referral-modal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal('referral-modal')">&times;</span>
        <h2>–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</h2>
        <div class="form-group">
          <p>–í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞: <input id="ref-link" type="text" readonly value="" onclick="this.select()"></p>
          <p>–ü—Ä–∏–≥–ª–∞—à–∞–π—Ç–µ –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞–π—Ç–µ 10% –æ—Ç –∏—Ö –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–π!</p>
          <p>–í–∞—à–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—ã: <span id="ref-count">0</span></p>
          <button onclick="copyRefLink()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
        </div>
      </div>
    </div>

    <script>
      let currentUserId = null;

      const serviceOptions = {
        ru: ['–í–µ–±-–¥–∏–∑–∞–π–Ω', '–§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞', '–ë—ç–∫–µ–Ω–¥ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞', '–ú–æ–±–∏–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞', 'UI/UX –¥–∏–∑–∞–π–Ω', 'SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è', '–ö–æ–ø–∏—Ä–∞–π—Ç–∏–Ω–≥', '–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω'],
        en: ['Web Design', 'Frontend Development', 'Backend Development', 'Mobile Development', 'UI/UX Design', 'SEO Optimization', 'Copywriting', 'Graphic Design']
      };

      const workOptions = {
        ru: ['–ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–µ–∫—Ç–æ–≤', '–ê–Ω–∞–ª–∏—Ç–∏–∫ –¥–∞–Ω–Ω—ã—Ö', '–ú–∞—Ä–∫–µ—Ç–æ–ª–æ–≥', 'SMM —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç', 'HR –º–µ–Ω–µ–¥–∂–µ—Ä', '–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫'],
        en: ['Project Manager', 'Data Analyst', 'Marketer', 'SMM Specialist', 'HR Manager', 'Financial Analyst']
      };

      function setSelectOptions(selectId, options) {
        const select = document.getElementById(selectId);
        if (select) {
          select.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ...</option>';
          options.forEach(option => {
            const opt = document.createElement('option');
            opt.value = option;
            opt.textContent = option;
            select.appendChild(opt);
          });
        }
      }

      // --- –§–û–ù ---
      function createStars() {
        const starsContainer = document.getElementById('stars');
        if (!starsContainer) return;
        const starCount = 200;

        for (let i = 0; i < starCount; i++) {
          const star = document.createElement('div');
          star.classList.add('star');
          star.style.left = Math.random() * 100 + '%';
          star.style.top = Math.random() * 100 + '%';
          star.style.width = Math.random() * 2 + 1 + 'px';
          star.style.height = star.style.width;
          star.style.animationDelay = Math.random() * 3 + 's';
          star.style.animationDuration = (Math.random() * 2 + 1) + 's';
          starsContainer.appendChild(star);
        }
      }

      let mouseTimeout;
      let currentTransform = 'translate(0px, 0px)';

      document.addEventListener('mousemove', (e) => {
        const starsContainer = document.getElementById('stars');
        if (!starsContainer) return;
        const speed = 0.02;
        const x = (e.clientX - window.innerWidth / 2) * speed;
        const y = (e.clientY - window.innerHeight / 2) * speed;
        currentTransform = `translate(${x}px, ${y}px)`;

        clearTimeout(mouseTimeout);

        starsContainer.style.transform = currentTransform;

        mouseTimeout = setTimeout(() => {
          starsContainer.style.transform = 'translate(0px, 0px)';
          currentTransform = 'translate(0px, 0px)';
        }, 1000);
      });

      document.addEventListener('mousemove', (e) => {
        const nebula = document.querySelector('.nebula');
        if (!nebula) return;
        const speed = 0.005;
        const nx = (e.clientX - window.innerWidth / 2) * speed;
        const ny = (e.clientY - window.innerHeight / 2) * speed;
        nebula.style.transform = `translate(${nx}px, ${ny}px)`;
      });

      createStars();

      // --- –£–ü–†–ê–í–õ–ï–ù–ò–ï –ú–û–î–ê–õ–¨–ù–´–ú–ò –û–ö–ù–ê–ú–ò ---
      function openModal(modalId) {
        if (modalId === 'chat-modal') {
          loadChats();
        } else if (modalId === 'donate-modal') {
          loadBalance();
        } else if (modalId === 'referral-modal') {
          loadReferral();
        }
        const modal = document.getElementById(modalId);
        if (modal) {
          modal.style.display = 'flex';
        }
      }

      function closeModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
          modal.style.display = 'none';
        }
      }
      
      window.addEventListener('click', (e) => {
        if (e.target.classList.contains('modal')) {
          closeModal(e.target.id);
        }
      });
      
      // --- –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï –ü–†–û–§–ò–õ–Ø ---
      function showEditProfile() {
        closeModal('settings-modal');
        const user = getCurrentUser();
        
        const editNick = document.getElementById('edit-nick');
        const nickHelp = document.getElementById('nick-help');
        if (editNick && nickHelp) {
          if (user?.vip) {
            editNick.disabled = false;
            nickHelp.style.display = 'none';
            editNick.value = user.nick || '';
          } else {
            editNick.disabled = true;
            nickHelp.style.display = 'block';
            editNick.value = user?.nick || '';
          }
        }
        const editDesc = document.getElementById('edit-desc');
        if (editDesc) editDesc.value = user?.desc || '';
        
        const cloneCards = (sourceId, targetId) => {
          const sourceContainer = document.getElementById(sourceId);
          const targetContainer = document.getElementById(targetId);
          if (!targetContainer) return;
          targetContainer.innerHTML = '';
          if (sourceContainer) {
            document.querySelectorAll(`#${sourceId} > .${sourceId === 'price-cards' ? 'e-card' : 'work-card'}`).forEach(card => {
              const clone = card.cloneNode(true);
              // –£–¥–∞–ª—è–µ–º remove-btn –µ—Å–ª–∏ –µ—Å—Ç—å, –∏–ª–∏ –¥–æ–±–∞–≤–ª—è–µ–º
              const existingRemove = clone.querySelector('.remove-btn');
              if (!existingRemove) {
                const removeBtn = document.createElement('button');
                removeBtn.textContent = '–£–¥–∞–ª–∏—Ç—å';
                removeBtn.className = 'remove-btn';
                removeBtn.onclick = (e) => { e.stopPropagation(); clone.remove(); };
                clone.appendChild(removeBtn);
              }
              targetContainer.appendChild(clone);
            });
          }
        };
        
        cloneCards('price-cards', 'edit-price-cards');
        cloneCards('work-cards', 'edit-work-cards');

        openModal('edit-profile-modal');
      }

      function closeEditProfileModal() {
        closeModal('edit-profile-modal');
      }
      
      function managePriceList() { 
        const lang = localStorage.getItem('lang') || 'ru';
        setSelectOptions('card-service', serviceOptions[lang]); 
        openModal('pricelist-modal'); 
      }
      function manageWorks() { 
        const lang = localStorage.getItem('lang') || 'ru';
        setSelectOptions('work-title', workOptions[lang]); 
        openModal('work-modal'); 
      }

      // --- –°–û–•–†–ê–ù–ï–ù–ò–ï –ü–†–û–§–ò–õ–Ø –ò –ö–ê–†–¢–û–ß–ï–ö ---
      function saveProfile() {
        const newNick = document.getElementById('edit-nick')?.value || '';
        const newDesc = document.getElementById('edit-desc')?.value || '';
        
        let users = JSON.parse(localStorage.getItem('users') || '[]');
        let userIndex = users.findIndex(u => u.id == currentUserId);

        if (userIndex === -1) {
          users.push({ id: currentUserId, rating: 0, completed: 0, balance: 0, vip: false, referrals: [] });
          userIndex = users.length - 1;
        }

        const user = users[userIndex];
        if (user.vip) {
          user.nick = newNick;
        }
        user.desc = newDesc;
        
        const getCardsFromModal = (modalId) => {
          const container = document.getElementById(modalId);
          if (!container) return [];
          const cards = Array.from(container.children).filter(c => c.classList.contains('e-card') || c.classList.contains('work-card'));
          return cards.map(c => ({
            title: c.dataset.title || c.querySelector('.infotop')?.textContent?.split('<br>')[0] || 'Unknown'
          }));
        };

        const pricelist = getCardsFromModal('edit-price-cards');
        const works = getCardsFromModal('edit-work-cards');
        
        user.pricelist = pricelist;
        user.works = works;

        localStorage.setItem('users', JSON.stringify(users));
        
        loadProfileData();
        closeEditProfileModal();
        
        alert('–ü—Ä–æ—Ñ–∏–ª—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω!');
      }

      // --- –ë–ê–õ–ê–ù–° –ò –î–û–ù–ê–¢ ---
      function loadBalance() {
        const user = getCurrentUser();
        document.getElementById('modal-balance').textContent = user?.balance || 0;
      }

      function processDonation() {
        const amount = parseInt(document.getElementById('donate-amount').value);
        const statusEl = document.getElementById('donate-status');
        statusEl.textContent = '–ò–º–∏—Ç–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–∞ —á–µ—Ä–µ–∑ –ÆKassa...';
        statusEl.style.color = 'orange';

        setTimeout(() => {
          let users = JSON.parse(localStorage.getItem('users') || '[]');
          let userIndex = users.findIndex(u => u.id == currentUserId);
          if (userIndex !== -1) {
            users[userIndex].balance += amount;
            users[userIndex].vip = users[userIndex].balance >= 500;
            localStorage.setItem('users', JSON.stringify(users));
            statusEl.textContent = `–ü–æ–ø–æ–ª–Ω–µ–Ω–æ –Ω–∞ ${amount} ‚ÇΩ! –ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: ${users[userIndex].balance} ‚ÇΩ`;
            statusEl.style.color = 'green';
            loadProfileData();
          }
        }, 2000);
      }

      // --- –†–ï–§–ï–†–ê–õ–ö–ê ---
      function loadReferral() {
        const user = getCurrentUser();
        const baseUrl = window.location.origin;
        const refLink = `${baseUrl}/profile.html?ref=${currentUserId}`;
        document.getElementById('ref-link').value = refLink;
        document.getElementById('ref-count').textContent = user?.referrals?.length || 0;

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        const urlParams = new URLSearchParams(window.location.search);
        const refId = urlParams.get('ref');
        if (refId && refId != currentUserId) {
          let users = JSON.parse(localStorage.getItem('users') || '[]');
          let referrerIndex = users.findIndex(u => u.id == refId);
          if (referrerIndex !== -1) {
            if (!users[referrerIndex].referrals) users[referrerIndex].referrals = [];
            if (!users[referrerIndex].referrals.includes(currentUserId)) {
              users[referrerIndex].referrals.push(currentUserId);
              localStorage.setItem('users', JSON.stringify(users));
              alert('–°–ø–∞—Å–∏–±–æ –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª–∫–µ! –†–µ—Ñ–µ—Ä–µ—Ä –ø–æ–ª—É—á–∏—Ç –±–æ–Ω—É—Å.');
            }
          }
        }
      }

      function copyRefLink() {
        const refInput = document.getElementById('ref-link');
        refInput.select();
        document.execCommand('copy');
        alert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!');
      }

      // --- –õ–û–ì–ò–ö–ê –ß–ê–¢–ê ---
      function loadChats() {
        const chats = JSON.parse(localStorage.getItem('chats')) || [];
        const chatListSidebar = document.getElementById('chat-list-sidebar');
        if (chatListSidebar) {
          chatListSidebar.innerHTML = '<h3 data-lang="chats-title">–ß–∞—Ç—ã</h3>';
        }

        const userChats = chats.filter(chat => chat.participants.includes(currentUserId));
        if (userChats.length === 0) {
          if (chatListSidebar) chatListSidebar.innerHTML += '<p data-lang="no-chats">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —á–∞—Ç–æ–≤.</p>';
          return;
        }

        userChats.forEach(chat => {
          const otherParticipantId = chat.participants.find(id => id !== currentUserId);
          const users = JSON.parse(localStorage.getItem('users')) || [];
          const otherUser = users.find(u => u.id === otherParticipantId);
          const chatName = otherUser ? otherUser.nick : 'Unknown User';
          const chatElement = document.createElement('div');
          chatElement.className = 'chat-list-item';
          chatElement.innerHTML = `<div>${chatName}</div>`;
          chatElement.onclick = (e) => {
            document.querySelectorAll('.chat-list-item').forEach(el => el.classList.remove('active'));
            e.currentTarget.classList.add('active');
            openChat(chat.id);
          };
          if (chatListSidebar) chatListSidebar.appendChild(chatElement);
        });
      }

      function openChat(chatId) {
        const chats = JSON.parse(localStorage.getItem('chats')) || [];
        const chat = chats.find(c => c.id === chatId);
        if (!chat) return;

        const messagesContainer = document.getElementById('chat-main-messages');
        if (messagesContainer) {
          messagesContainer.innerHTML = '';
          chat.messages.forEach(msg => {
            const messageEl = document.createElement('div');
            messageEl.className = 'chat-message';
            messageEl.classList.add(msg.senderId === currentUserId ? 'sent' : 'received');
            messageEl.textContent = msg.text;
            messagesContainer.appendChild(messageEl);
          });
          messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        const chatInput = document.getElementById('chat-main-input');
        if (chatInput) chatInput.style.display = 'flex';
        const sendBtn = document.getElementById('chat-send-btn');
        if (sendBtn) {
          const newSendBtn = sendBtn.cloneNode(true);
          sendBtn.parentNode.replaceChild(newSendBtn, sendBtn);
          newSendBtn.onclick = () => sendMessage(chatId);
        }
        const inputField = document.getElementById('chat-input-field');
        if (inputField) {
          inputField.onkeydown = (e) => {
            if (e.key === 'Enter') { e.preventDefault(); sendMessage(chatId); }
          };
        }
      }

      function sendMessage(chatId) {
        const input = document.getElementById('chat-input-field');
        if (!input) return;
        const text = input.value.trim();
        if (!text) return;

        const newMessage = { senderId: currentUserId, text: text, timestamp: new Date().toISOString() };
        let chats = JSON.parse(localStorage.getItem('chats')) || [];
        const chatIndex = chats.findIndex(c => c.id === chatId);
        if (chatIndex !== -1) {
          chats[chatIndex].messages.push(newMessage);
          localStorage.setItem('chats', JSON.stringify(chats));
          input.value = '';
          openChat(chatId);
        }
      }

      // --- –°–û–ó–î–ê–ù–ò–ï –ò –î–û–ë–ê–í–õ–ï–ù–ò–ï –ö–ê–†–¢–û–ß–ï–ö ---
      function createCardElement(cardData, type) {
        const cardClass = type === 'price' ? 'e-card' : 'work-card';
        const card = document.createElement('div');
        const user = getCurrentUser();
        const isVip = user?.vip;
        if (isVip) {
          card.classList.add('vip-card');
        }
        card.className = `${cardClass} playing`;
        card.dataset.title = cardData.title;
        const creatorName = (getCurrentUser()?.nick || 'user');
        card.innerHTML = `
          <div class="wave"></div><div class="wave"></div><div class="wave"></div>
          <div class="image"></div>
          <div class="infotop">
            ${cardData.title}<br>
            <div class="name">–æ—Ç ${creatorName}</div>
          </div>`;
        return card;
      }
      
      function addCard() {
        const select = document.getElementById('card-service');
        if (!select) return;
        const title = select.value;
        if (title) {
          const container = document.getElementById('edit-price-cards');
          if (container) {
            const cardEl = createCardElement({ title }, 'price');
            const removeBtn = document.createElement('button');
            removeBtn.textContent = '–£–¥–∞–ª–∏—Ç—å';
            removeBtn.className = 'remove-btn';
            removeBtn.onclick = (e) => { e.stopPropagation(); cardEl.remove(); };
            cardEl.appendChild(removeBtn);
            container.appendChild(cardEl);
          }
          closeModal('pricelist-modal');
          select.value = '';
        }
      }
      
      function addWork() {
        const select = document.getElementById('work-title');
        if (!select) return;
        const title = select.value;
        if (title) {
          const container = document.getElementById('edit-work-cards');
          if (container) {
            const cardEl = createCardElement({ title }, 'work');
            const removeBtn = document.createElement('button');
            removeBtn.textContent = '–£–¥–∞–ª–∏—Ç—å';
            removeBtn.className = 'remove-btn';
            removeBtn.onclick = (e) => { e.stopPropagation(); cardEl.remove(); };
            cardEl.appendChild(removeBtn);
            container.appendChild(cardEl);
          }
          closeModal('work-modal');
          select.value = '';
        }
      }

      // --- –£–ü–†–ê–í–õ–ï–ù–ò–ï –¢–ï–ú–û–ô –ò –Ø–ó–´–ö–û–ú ---
      const trans = {
        ru: { 
          "home": "–î–æ–º–æ–π", 
          "chat": "–ß–∞—Ç", 
          "settings": "–ù–∞—Å—Ç—Ä–æ–π–∫–∏", 
          "about": "–û –Ω–∞—Å",
          "referral": "–†–µ—Ñ–µ—Ä–∞–ª–∫–∞",
          "chats-title": "–ß–∞—Ç—ã",
          "no-chats": "–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —á–∞—Ç–æ–≤.",
          "select-chat": "–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è",
          "message-placeholder": "–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...",
          "send": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å",
          "settings-title": "–ù–∞—Å—Ç—Ä–æ–π–∫–∏",
          "language-label": "–Ø–∑—ã–∫:",
          "theme-label": "–¢–µ–º–∞:",
          "edit-profile-label": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å",
          "edit-profile-button": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å",
          "edit-profile-title": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è",
          "nick-label": "–ù–∏–∫:",
          "description-label": "–û–ø–∏—Å–∞–Ω–∏–µ:",
          "services": "–£—Å–ª—É–≥–∏",
          "manage-pricelist": "–î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É",
          "works": "–†–∞–±–æ—Ç—ã",
          "manage-works": "–î–æ–±–∞–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É",
          "save-button": "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",
          "cancel-button": "–û—Ç–º–µ–Ω–∞",
          "pricelist-title": "–î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É",
          "service-name": "–£—Å–ª—É–≥–∞:",
          "add-card": "–î–æ–±–∞–≤–∏—Ç—å",
          "work-title": "–î–æ–±–∞–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É",
          "vacancy-name": "–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã:",
          "add-work-card": "–î–æ–±–∞–≤–∏—Ç—å",
          "about-title": "–û –Ω–∞—Å",
          "about-text": "Work Eye - —ç—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ä–∞–±–æ—Ç—ã –∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π.",
          "telegram-channel": "–ù–∞—à Telegram –ö–∞–Ω–∞–ª",
          "rating-label": "–†–µ–π—Ç–∏–Ω–≥: ",
          "completed-label": "–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã: ",
          "my-services": "–ú–æ–∏ —É—Å–ª—É–≥–∏",
          "my-works": "–ú–æ–∏ —Ä–∞–±–æ—Ç—ã"
        },
        en: { 
          "home": "Home", 
          "chat": "Chat", 
          "settings": "Settings", 
          "about": "About",
          "referral": "Referral",
          "chats-title": "Chats",
          "no-chats": "You have no chats yet.",
          "select-chat": "Select a chat to communicate",
          "message-placeholder": "Enter message...",
          "send": "Send",
          "settings-title": "Settings",
          "language-label": "Language:",
          "theme-label": "Theme:",
          "edit-profile-label": "Edit Profile",
          "edit-profile-button": "Edit",
          "edit-profile-title": "Edit Profile",
          "nick-label": "Nick:",
          "description-label": "Description:",
          "services": "Services",
          "manage-pricelist": "Add Service",
          "works": "Jobs",
          "manage-works": "Add Job",
          "save-button": "Save",
          "cancel-button": "Cancel",
          "pricelist-title": "Add Service",
          "service-name": "Service:",
          "add-card": "Add",
          "work-title": "Add Job",
          "vacancy-name": "Job Title:",
          "add-work-card": "Add",
          "about-title": "About",
          "about-text": "Work Eye is a platform for finding jobs and performers.",
          "telegram-channel": "Our Telegram Channel",
          "rating-label": "Rating: ",
          "completed-label": "Completed Works: ",
          "my-services": "My Services",
          "my-works": "My Jobs"
        }
      };
      function applyLang(lang) {
        localStorage.setItem('lang', lang);
        document.querySelectorAll('[data-lang]').forEach(el => {
          const key = el.getAttribute('data-lang');
          if (trans[lang]?.[key]) {
            el.textContent = trans[lang][key];
          }
        });
        document.querySelectorAll('[data-lang-placeholder]').forEach(el => {
          const key = el.getAttribute('data-lang-placeholder');
          if (trans[lang]?.[key]) {
            el.placeholder = trans[lang][key];
          }
        });
      }
      function setLang(lang) {
        applyLang(lang);
      }
      let themeListener;
      function applyTheme(theme) {
        localStorage.setItem('theme', theme);
        if (themeListener) {
          themeListener.removeEventListener('change', () => applyTheme('system'));
        }
        let effectiveTheme = theme;
        if (theme === 'system') {
          effectiveTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
          themeListener = window.matchMedia('(prefers-color-scheme: dark)');
          themeListener.addEventListener('change', () => applyTheme('system'));
        }
        document.body.className = effectiveTheme;
      }
      function setTheme(theme) {
        applyTheme(theme);
      }

      // --- –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –ü–†–ò –°–¢–ê–†–¢–ï ---
      function getCurrentUser() {
        const users = JSON.parse(localStorage.getItem('users')) || [];
        return users.find(u => u.id == currentUserId);
      }
      
      function loadProfileData() {
        const user = getCurrentUser();
        const defaultUser = { nick: 'UserName', id: currentUserId, rating: 0, completed: 0, desc: '–ü—Ä–æ—Ñ–∏–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ.', pricelist: [], works: [], balance: 0, vip: false };
        const displayUser = user || defaultUser;

        const nickEl = document.getElementById('nick-value');
        if (nickEl) {
          nickEl.textContent = `@${displayUser.nick}`;
          if (displayUser.vip) {
            nickEl.classList.add('vip-nick');
            nickEl.style.color = '#ffd700'; // –ó–æ–ª–æ—Ç–æ–π —Ü–≤–µ—Ç –¥–ª—è VIP
          } else {
            nickEl.classList.remove('vip-nick');
            nickEl.style.color = '';
          }
        }
        const userIdEl = document.getElementById('user-id-value');
        if (userIdEl) userIdEl.textContent = displayUser.id;
        const ratingEl = document.getElementById('rating');
        if (ratingEl) ratingEl.textContent = displayUser.rating;
        const completedEl = document.getElementById('completed-works');
        if (completedEl) completedEl.textContent = displayUser.completed;
        const balanceEl = document.getElementById('balance-value');
        if (balanceEl) balanceEl.textContent = displayUser.balance;
        const descEl = document.getElementById('profile-desc');
        if (descEl) descEl.textContent = displayUser.desc;

        const renderCards = (containerId, cards, type) => {
          const container = document.getElementById(containerId);
          if (!container) return;
          container.innerHTML = '';
          (cards || []).forEach(cardData => {
            const cardEl = createCardElement(cardData, type);
            container.appendChild(cardEl);
          });
        };
        
        renderCards('price-cards', displayUser.pricelist, 'price');
        renderCards('work-cards', displayUser.works, 'work');
      }

      document.addEventListener('DOMContentLoaded', () => {
        const tg = window.Telegram?.WebApp;
        if (tg && tg.initDataUnsafe.user) {
          currentUserId = tg.initDataUnsafe.user.id;
        } else {
          if (!localStorage.getItem('dev_user_id')) {
            localStorage.setItem('dev_user_id', Date.now());
          }
          currentUserId = parseInt(localStorage.getItem('dev_user_id'));
        }
        
        applyLang(localStorage.getItem('lang') || 'ru');
        applyTheme(localStorage.getItem('theme') || 'system');
        loadProfileData();
        loadReferral(); // –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ ref –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

        // Theme radio listeners
        const themeRadios = document.querySelectorAll('input[name="theme"]');
        themeRadios.forEach(radio => {
          radio.addEventListener('change', (e) => {
            setTheme(e.target.value);
          });
        });

        // Set initial checked state
        const savedTheme = localStorage.getItem('theme') || 'system';
        const initialRadio = document.querySelector(`input[name="theme"][value="${savedTheme}"]`);
        if (initialRadio) {
          initialRadio.checked = true;
        } else {
          document.querySelector('input[name="theme"][value="light"]').checked = true;
        }
      });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'987542e8fd72f962',t:'MTc1OTI1MTQ2Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>